###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         24/Nov/2016  14:17:55 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \ZMain\TI2530DB\OnBoard.c                          #
#    Command line       =  -f E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zst #
#                          ack\Applications\SmartApp\CC2530DB\Devices\..\..\. #
#                          .\..\Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ       #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK     #
#                          -DSSA_CONNECTOR) -f E:\work\zigbee\ZStack-Smart-2. #
#                          5.2b\Projects\zstack\Applications\SmartApp\CC2530D #
#                          B\Devices\..\..\..\..\Tools\CC2530DB\f8wConfig.cfg #
#                           (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=1     #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=600         #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\work\zigbee\ZStack-Smart #
#                          -2.5.2b\Projects\zstack\ZMain\TI2530DB\OnBoard.c   #
#                          -D SECURE=1 -D ZTOOL_P1 -D DEVICE_TYPE_ID=0xFE -D  #
#                          SIGNAL_AMPLIFIER_SETTING -D                        #
#                          xPOWER_AMPLIFIER_POSITION_1 -D xNWK_AUTO_POLL -D   #
#                          xHAL_UART_DMA=2 -D xHAL_UART_DMA_ALT1 -D           #
#                          xJIAJU_BUILDIN -D MT_TASK -D MT_SYS_FUNC -D        #
#                          MT_ZDO_FUNC -D NV_INIT -D NV_RESTORE -lC           #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\bin\DemoBaseZC\Lis #
#                          t\ -lA E:\work\zigbee\ZStack-Smart-2.5.2b\Projects #
#                          \zstack\Applications\SmartApp\CC2530DB\bin\DemoBas #
#                          eZC\List\ --diag_suppress Pe001,Pa010 -o           #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\bin\DemoBaseZC\Obj #
#                          \ -e --debug --core=plain --dptr=16,1              #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zst #
#                          ack\Applications\SmartApp\CC2530DB\Devices\ -I     #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\Sour #
#                          ce\Common\ -I E:\work\zigbee\ZStack-Smart-2.5.2b\P #
#                          rojects\zstack\Applications\SmartApp\CC2530DB\Devi #
#                          ces\..\..\Source\Connector\ -I                     #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\Sour #
#                          ce\\EndNode\ -I E:\work\zigbee\ZStack-Smart-2.5.2b #
#                          \Projects\zstack\Applications\SmartApp\CC2530DB\De #
#                          vices\..\..\Source\Board\ -I                       #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\Sour #
#                          ce\Manage\ -I E:\work\zigbee\ZStack-Smart-2.5.2b\P #
#                          rojects\zstack\Applications\SmartApp\CC2530DB\Devi #
#                          ces\..\..\Source\Manage\Callbacks\ -I              #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\Sour #
#                          ce\Manage\debug\ -I E:\work\zigbee\ZStack-Smart-2. #
#                          5.2b\Projects\zstack\Applications\SmartApp\CC2530D #
#                          B\Devices\..\..\Source\Manage\HeartBeat\ -I        #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\Sour #
#                          ce\Manage\incode\ -I E:\work\zigbee\ZStack-Smart-2 #
#                          .5.2b\Projects\zstack\Applications\SmartApp\CC2530 #
#                          DB\Devices\..\..\..\..\ZMain\TI2530DB\ -I          #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\hal\include\ -I                 #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\hal\target\CC2530EB\ -I         #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\mac\include\ -I                 #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\mac\high_level\ -I              #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\ -I         #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\mac\low_level\srf04\single_chip #
#                          \ -I E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\z #
#                          stack\Applications\SmartApp\CC2530DB\Devices\..\.. #
#                          \..\..\..\..\Components\mt\ -I                     #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\osal\include\ -I                #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\services\saddr\ -I              #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\services\sdata\ -I              #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\stack\af\ -I                    #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\stack\nwk\ -I                   #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\stack\sapi\ -I                  #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\stack\sec\ -I                   #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\stack\sys\ -I                   #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\stack\zdo\ -I                   #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\zmac\ -I                        #
#                          E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\Devices\..\..\..\. #
#                          .\..\..\Components\zmac\f8w\ -Oh                   #
#                          --require_prototypes                               #
#    List file          =  E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\bin\DemoBaseZC\Lis #
#                          t\OnBoard.lst                                      #
#    Object file        =  E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack #
#                          \Applications\SmartApp\CC2530DB\bin\DemoBaseZC\Obj #
#                          \OnBoard.r51                                       #
#                                                                             #
#                                                                             #
###############################################################################

E:\work\zigbee\ZStack-Smart-2.5.2b\Projects\zstack\ZMain\TI2530DB\OnBoard.c
      1          /**************************************************************************************************
      2            Filename:       OnBoard.c
      3            Revised:        $Date: 2012-03-29 12:09:02 -0700 (Thu, 29 Mar 2012) $
      4            Revision:       $Revision: 29943 $
      5          
      6            Description:    This file contains the UI and control for the
      7                            peripherals on the EVAL development board
      8            Notes:          This file targets the Chipcon CC2530/31
      9          
     10          
     11            Copyright 2005-2010 Texas Instruments Incorporated. All rights reserved.
     12          
     13            IMPORTANT: Your use of this Software is limited to those specific rights
     14            granted under the terms of a software license agreement between the user
     15            who downloaded the software, his/her employer (which must be your employer)
     16            and Texas Instruments Incorporated (the "License").  You may not use this
     17            Software unless you agree to abide by the terms of the License. The License
     18            limits your use, and you acknowledge, that the Software may not be modified,
     19            copied or distributed unless embedded on a Texas Instruments microcontroller
     20            or used solely and exclusively in conjunction with a Texas Instruments radio
     21            frequency transceiver, which is integrated into your product.  Other than for
     22            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     23            works of, modify, distribute, perform, display or sell this Software and/or
     24            its documentation for any purpose.
     25          
     26            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     27            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     28            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     29            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     30            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     31            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     32            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     33            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     34            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     35            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     36            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     37          
     38            Should you have any questions regarding your right to use this Software,
     39            contact Texas Instruments Incorporated at www.TI.com.
     40          **************************************************************************************************/
     41          
     42          /**************************************************************************************************
     43          Modify by Sam_Chen
     44          Date:2015-02-04
     45          **************************************************************************************************/
     46          
     47          /*********************************************************************
     48           * INCLUDES
     49           */
     50          
     51          #include "ZComDef.h"
     52          #include "ZGlobals.h"
     53          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x9d
   \   unsigned char volatile __sfr SLEEPSTA
   \                     SLEEPSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xd6
   \   unsigned char volatile __sfr DMAARM
   \                     DMAARM:
   \   000000                DS 1
     54          #include "OSAL.h"
     55          #include "MT.h"
     56          #include "MT_SYS.h"
     57          #include "DebugTrace.h"
     58          
     59          /* Hal */
     60          #include "hal_lcd.h"
     61          #include "hal_mcu.h"
     62          #include "hal_timer.h"
     63          #include "hal_key.h"
     64          #include "hal_led.h"
     65          
     66          /* Allow access macRandomByte() */
     67          #include "mac_radio_defs.h"
     68          
     69          /*********************************************************************
     70           * CONSTANTS
     71           */
     72          
     73          // Task ID not initialized
     74          #define NO_TASK_ID 0xFF
     75          
     76          // Minimum length RAM "pattern" for Stack check
     77          #define MIN_RAM_INIT 12
     78          
     79          /*********************************************************************
     80           * GLOBAL VARIABLES
     81           */
     82          
     83          #if defined MAKE_CRC_SHDW
     84          #pragma location="CRC_SHDW"
     85          const CODE uint16 _crcShdw = 0xFFFF;
     86          #pragma required=_crcShdw
     87          
     88          #else  // if !defined MAKE_CRC_SHDW
     89          
     90          #pragma location="LOCK_BITS_ADDRESS_SPACE"

   \                                 In  segment LOCK_BITS_ADDRESS_SPACE, align 1
     91          __no_init uint8 _lockBits[16];
   \                     _lockBits:
   \   000000                DS 16
     92          #pragma required=_lockBits
     93          
     94          #if defined ZCL_KEY_ESTABLISH
     95          #include "zcl_cert_data.c"
     96          #else
     97          #pragma location="IEEE_ADDRESS_SPACE"

   \                                 In  segment IEEE_ADDRESS_SPACE, align 1
     98          __no_init uint8 _nvIEEE[Z_EXTADDR_LEN];
   \                     _nvIEEE:
   \   000000                DS 8
   \   000008                REQUIRE _lockBits
     99          #pragma required=_nvIEEE
    100          #endif
    101          
    102          #pragma location="RESERVED_ADDRESS_SPACE"

   \                                 In  segment RESERVED_ADDRESS_SPACE, align 1
    103          __no_init uint8 _reserved[1932];
   \                     _reserved:
   \   000000                DS 1932
   \   00078C                REQUIRE _nvIEEE
    104          #pragma required=_reserved
    105          #endif
    106          
    107          // 64-bit Extended Address of this device

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    108          uint8 aExtendedAddress[8];
   \                     aExtendedAddress:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
   \   000008                REQUIRE _reserved
    109          
    110          /*********************************************************************
    111           * LOCAL VARIABLES
    112           */
    113          
    114          // Registered keys task ID, initialized to NOT USED.

   \                                 In  segment XDATA_I, align 1, keep-with-next
    115          static uint8 registeredKeysTaskID = NO_TASK_ID;
   \                     registeredKeysTaskID:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for registeredKeysTaskID>`
   \   000001                REQUIRE __INIT_XDATA_I
    116          
    117          /*********************************************************************
    118           * LOCAL FUNCTIONS
    119           */
    120          
    121          static void ChkReset( void );
    122          
    123          /*********************************************************************
    124           * @fn      InitBoard()
    125           * @brief   Initialize the CC2420DB Board Peripherals
    126           * @param   level: COLD,WARM,READY
    127           * @return  None
    128           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    129          void InitBoard( uint8 level )
   \                     InitBoard:
    130          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    131            if ( level == OB_COLD )
   \   000006   7020         JNZ     ??InitBoard_0
    132            {
    133              // IAR does not zero-out this byte below the XSTACK.
    134              *(uint8 *)0x0 = 0;
   \   000008   900000       MOV     DPTR,#0x0
   \   00000B   E4           CLR     A
   \   00000C   F0           MOVX    @DPTR,A
    135              // Interrupts off
    136              osal_int_disable( INTS_ALL );
   \   00000D                ; Setup parameters for call to function osal_int_disable
   \   00000D   79FF         MOV     R1,#-0x1
   \   00000F   12....       LCALL   ??osal_int_disable?relay
    137              // Check for Brown-Out reset
    138              ChkReset();
   \   000012   E59D         MOV     A,0x9d
   \   000014   5418         ANL     A,#0x18
   \   000016   F8           MOV     R0,A
   \   000017   6018         JZ      ??InitBoard_1
   \   000019   7408         MOV     A,#0x8
   \   00001B   68           XRL     A,R0
   \   00001C   6013         JZ      ??InitBoard_1
   \   00001E   7410         MOV     A,#0x10
   \   000020   68           XRL     A,R0
   \   000021   600E         JZ      ??InitBoard_1
   \   000023                ; Setup parameters for call to function halAssertHandler
   \   000023   12....       LCALL   ??halAssertHandler?relay
   \   000026   8009         SJMP    ??InitBoard_1
    139            }
    140            else  // !OB_COLD
    141            {
    142              /* Initialize Key stuff */
    143          #ifndef HAL_KEY_INT_METHOD
    144              HalKeyConfig(HAL_KEY_INTERRUPT_DISABLE, OnBoard_KeyCallback);
    145          #else
    146          	HalKeyConfig(HAL_KEY_INTERRUPT_ENABLE, OnBoard_KeyCallback);
   \                     ??InitBoard_0:
   \   000028                ; Setup parameters for call to function HalKeyConfig
   \   000028   7A..         MOV     R2,#??OnBoard_KeyCallback?relay & 0xff
   \   00002A   7B..         MOV     R3,#(??OnBoard_KeyCallback?relay >> 8) & 0xff
   \   00002C   7901         MOV     R1,#0x1
   \   00002E   12....       LCALL   ??HalKeyConfig?relay
    147          #endif
    148            }
    149          }
   \                     ??InitBoard_1:
   \   000031   7F01         MOV     R7,#0x1
   \   000033   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000036                REQUIRE SLEEPSTA
    150          
    151          /*********************************************************************
    152           * @fn      ChkReset()
    153           * @brief   Check reset bits - if reset cause is unknown, assume a
    154           *          brown-out (low power), assume batteries are not reliable,
    155           *          hang in a loop and sequence through the LEDs.
    156           * @param   None
    157           * @return  None
    158           *********************************************************************/
    159          void ChkReset( void )
    160          {
    161            uint8 rib;
    162          
    163            // Isolate reset indicator bits
    164            rib = SLEEPSTA & LRESET;
    165          
    166            if ( rib == RESETPO )
    167            {
    168              // Put code here to handle Power-On reset
    169            }
    170            else if ( rib == RESETEX )
    171            {
    172              // Put code here to handle External reset
    173            }
    174            else if ( rib == RESETWD )
    175            {
    176              // Put code here to handle WatchDog reset
    177            }
    178            else  // Unknown reason - not expected.
    179            {
    180              HAL_ASSERT(0);
    181            }
    182          }
    183          
    184          /*********************************************************************
    185           *                        "Keyboard" Support
    186           *********************************************************************/
    187          
    188          /*********************************************************************
    189           * Keyboard Register function
    190           *
    191           * The keyboard handler is setup to send all keyboard changes to
    192           * one task (if a task is registered).
    193           *
    194           * If a task registers, it will get all the keys. You can change this
    195           * to register for individual keys.
    196           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    197          uint8 RegisterForKeys( uint8 task_id )
   \                     RegisterForKeys:
    198          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
   \   000004   E9           MOV     A,R1
   \   000005   F8           MOV     R0,A
    199            // Allow only the first task
    200            if ( registeredKeysTaskID == NO_TASK_ID )
   \   000006   90....       MOV     DPTR,#registeredKeysTaskID
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   F4           CPL     A
   \   00000B   7006         JNZ     ??RegisterForKeys_0
    201            {
    202              registeredKeysTaskID = task_id;
   \   00000D   E8           MOV     A,R0
   \   00000E   F0           MOVX    @DPTR,A
    203              return ( true );
   \   00000F   7901         MOV     R1,#0x1
   \   000011   8002         SJMP    ??RegisterForKeys_1
    204            }
    205            else
    206              return ( false );
   \                     ??RegisterForKeys_0:
   \   000013   7900         MOV     R1,#0x0
   \                     ??RegisterForKeys_1:
   \   000015   02....       LJMP    ?Subroutine0 & 0xFFFF
    207          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    208          
    209          /*********************************************************************
    210           * @fn      OnBoard_SendKeys
    211           *
    212           * @brief   Send "Key Pressed" message to application.
    213           *
    214           * @param   keys  - keys that were pressed
    215           *          state - shifted
    216           *
    217           * @return  status
    218           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    219          uint8 OnBoard_SendKeys( uint16 keys, uint8 state )
   \                     OnBoard_SendKeys:
    220          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   89..         MOV     ?V0 + 0,R1
    221            keyChange_t *msgPtr;
    222          
    223            if ( registeredKeysTaskID != NO_TASK_ID )
   \   00000B   90....       MOV     DPTR,#registeredKeysTaskID
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   F4           CPL     A
   \   000010   602F         JZ      ??OnBoard_SendKeys_0
    224            {
    225              // Send the address to the task
    226              msgPtr = (keyChange_t *)osal_msg_allocate( sizeof(keyChange_t) );
   \   000012                ; Setup parameters for call to function osal_msg_allocate
   \   000012   7A05         MOV     R2,#0x5
   \   000014   7B00         MOV     R3,#0x0
   \   000016   12....       LCALL   ??osal_msg_allocate?relay
    227              if ( msgPtr )
   \   000019   EA           MOV     A,R2
   \   00001A   4B           ORL     A,R3
   \   00001B   6020         JZ      ??OnBoard_SendKeys_1
    228              {
    229                msgPtr->hdr.event = KEY_CHANGE;
   \   00001D   8A82         MOV     DPL,R2
   \   00001F   8B83         MOV     DPH,R3
   \   000021   74C0         MOV     A,#-0x40
   \   000023   F0           MOVX    @DPTR,A
    230                msgPtr->state = state;
   \   000024   A3           INC     DPTR
   \   000025   A3           INC     DPTR
   \   000026   E5..         MOV     A,?V0 + 0
   \   000028   F0           MOVX    @DPTR,A
    231                msgPtr->keys = keys;
   \   000029   8A82         MOV     DPL,R2
   \   00002B   8B83         MOV     DPH,R3
   \   00002D   A3           INC     DPTR
   \   00002E   A3           INC     DPTR
   \   00002F   A3           INC     DPTR
   \   000030   EE           MOV     A,R6
   \   000031   F0           MOVX    @DPTR,A
   \   000032   A3           INC     DPTR
   \   000033   EF           MOV     A,R7
   \   000034   F0           MOVX    @DPTR,A
    232          
    233                osal_msg_send( registeredKeysTaskID, (uint8 *)msgPtr );
   \   000035                ; Setup parameters for call to function osal_msg_send
   \   000035   90....       MOV     DPTR,#registeredKeysTaskID
   \   000038   E0           MOVX    A,@DPTR
   \   000039   F9           MOV     R1,A
   \   00003A   12....       LCALL   ??osal_msg_send?relay
    234              }
    235              return ( ZSuccess );
   \                     ??OnBoard_SendKeys_1:
   \   00003D   7900         MOV     R1,#0x0
   \   00003F   8002         SJMP    ??OnBoard_SendKeys_2
    236            }
    237            else
    238              return ( ZFailure );
   \                     ??OnBoard_SendKeys_0:
   \   000041   7901         MOV     R1,#0x1
   \                     ??OnBoard_SendKeys_2:
   \   000043   7F04         MOV     R7,#0x4
   \   000045   02....       LJMP    ?BANKED_LEAVE_XDATA
    239          }
    240          
    241          /*********************************************************************
    242           * @fn      OnBoard_KeyCallback
    243           *
    244           * @brief   Callback service for keys
    245           *
    246           * @param   keys  - keys that were pressed
    247           *          state - shifted
    248           *
    249           * @return  void
    250           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    251          void OnBoard_KeyCallback ( uint16 keys, uint8 state )
   \                     OnBoard_KeyCallback:
    252          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    253            uint8 shift;
    254            (void)state;
    255          
    256            shift = (keys & HAL_KEY_SW_6) ? true : false;
    257          
    258            if ( OnBoard_SendKeys( keys, shift ) != ZSuccess )
   \   000004                ; Setup parameters for call to function OnBoard_SendKeys
   \   000004   EA           MOV     A,R2
   \   000005   C4           SWAP    A
   \   000006   13           RRC     A
   \   000007   5407         ANL     A,#0x7
   \   000009   A2E0         MOV     C,0xE0 /* A   */.0
   \   00000B   E4           CLR     A
   \   00000C   33           RLC     A
   \   00000D   F9           MOV     R1,A
   \   00000E   12....       LCALL   ??OnBoard_SendKeys?relay
    259            {
    260              // Process SW1 here
    261              if ( keys & HAL_KEY_SW_1 )  // Switch 1
    262              {
    263              }
    264              // Process SW2 here
    265              if ( keys & HAL_KEY_SW_2 )  // Switch 2
    266              {
    267              }
    268              // Process SW3 here
    269              if ( keys & HAL_KEY_SW_3 )  // Switch 3
    270              {
    271              }
    272              // Process SW4 here
    273              if ( keys & HAL_KEY_SW_4 )  // Switch 4
    274              {
    275              }
    276              // Process SW5 here
    277              if ( keys & HAL_KEY_SW_5 )  // Switch 5
    278              {
    279              }
    280              // Process SW6 here
    281              if ( keys & HAL_KEY_SW_6 )  // Switch 6
    282              {
    283              }
    284            }
    285          }
   \   000011   80..         SJMP    ?Subroutine0
    286          
    287          /*********************************************************************
    288           * @fn      OnBoard_stack_used
    289           *
    290           * @brief   Runs through the stack looking for touched memory.
    291           *
    292           * @param   none
    293           *
    294           * @return  Maximum number of bytes used by the stack.
    295           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    296          uint16 OnBoard_stack_used(void)
   \                     OnBoard_stack_used:
    297          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    298            uint8 const *ptr;
    299            uint8 cnt = 0;
   \   000004   7A00         MOV     R2,#0x0
    300          
    301            for (ptr = CSTACK_END; ptr > CSTACK_BEG; ptr--)
   \   000006   7582..       MOV     DPL,#(SFE(XSTACK) + 255) & 0xff
   \   000009   7583..       MOV     DPH,#((SFE(XSTACK) - 1) >> 8) & 0xff
   \   00000C   78..         MOV     R0,#SFB(XSTACK) & 0xff
   \   00000E   79..         MOV     R1,#(SFB(XSTACK) >> 8) & 0xff
   \   000010   800E         SJMP    ??OnBoard_stack_used_0
    302            {
    303              if (STACK_INIT_VALUE == *ptr)
    304              {
    305                if (++cnt >= MIN_RAM_INIT)
    306                {
    307                  ptr += MIN_RAM_INIT;
    308                  break;
    309                }
    310              }
    311              else
    312              {
    313                cnt = 0;
   \                     ??OnBoard_stack_used_1:
   \   000012   7A00         MOV     R2,#0x0
    314              }
   \                     ??OnBoard_stack_used_2:
   \   000014   E582         MOV     A,DPL
   \   000016   24FF         ADD     A,#-0x1
   \   000018   F582         MOV     DPL,A
   \   00001A   E583         MOV     A,DPH
   \   00001C   34FF         ADDC    A,#-0x1
   \   00001E   F583         MOV     DPH,A
   \                     ??OnBoard_stack_used_0:
   \   000020   C3           CLR     C
   \   000021   E8           MOV     A,R0
   \   000022   9582         SUBB    A,DPL
   \   000024   E9           MOV     A,R1
   \   000025   9583         SUBB    A,DPH
   \   000027   5018         JNC     ??OnBoard_stack_used_3
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   64CD         XRL     A,#0xcd
   \   00002C   70E4         JNZ     ??OnBoard_stack_used_1
   \   00002E   0A           INC     R2
   \   00002F   EA           MOV     A,R2
   \   000030   C3           CLR     C
   \   000031   940C         SUBB    A,#0xc
   \   000033   40DF         JC      ??OnBoard_stack_used_2
   \   000035   E582         MOV     A,DPL
   \   000037   240C         ADD     A,#0xc
   \   000039   F582         MOV     DPL,A
   \   00003B   E583         MOV     A,DPH
   \   00003D   3400         ADDC    A,#0x0
   \   00003F   F583         MOV     DPH,A
    315            }
    316          
    317            return (uint16)(CSTACK_END - ptr + 1);
   \                     ??OnBoard_stack_used_3:
   \   000041   74..         MOV     A,#(SFE(XSTACK) + 255) & 0xff
   \   000043   C3           CLR     C
   \   000044   9582         SUBB    A,DPL
   \   000046   F8           MOV     R0,A
   \   000047   74..         MOV     A,#((SFE(XSTACK) - 1) >> 8) & 0xff
   \   000049   9583         SUBB    A,DPH
   \   00004B   F9           MOV     R1,A
   \   00004C   E8           MOV     A,R0
   \   00004D   2401         ADD     A,#0x1
   \   00004F   FA           MOV     R2,A
   \   000050   E9           MOV     A,R1
   \   000051   3400         ADDC    A,#0x0
   \   000053   FB           MOV     R3,A
   \   000054                REQUIRE ?Subroutine0
   \   000054                ; // Fall through to label ?Subroutine0
    318          }
    319          
    320          /*********************************************************************
    321           * @fn      _itoa
    322           *
    323           * @brief   convert a 16bit number to ASCII
    324           *
    325           * @param   num -
    326           *          buf -
    327           *          radix -
    328           *
    329           * @return  void
    330           *
    331           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    332          void _itoa(uint16 num, uint8 *buf, uint8 radix)
   \                     _itoa:
    333          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
    334            char c,i;
    335            uint8 *p, rst[5];
    336          
    337            p = rst;
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   AC82         MOV     R4,DPL
   \   00001A   AD83         MOV     R5,DPH
    338            for ( i=0; i<5; i++,p++ )
   \   00001C   75..00       MOV     ?V0 + 5,#0x0
   \   00001F   8982         MOV     DPL,R1
   \   000021   8582..       MOV     ?V0 + 2,DPL
   \   000024   75..00       MOV     ?V0 + 3,#0x0
    339            {
    340              c = num % radix;  // Isolate a digit
   \                     ??_itoa_0:
   \   000027   EE           MOV     A,R6
   \   000028   F8           MOV     R0,A
   \   000029   EF           MOV     A,R7
   \   00002A   F9           MOV     R1,A
   \   00002B   AA..         MOV     R2,?V0 + 2
   \   00002D   AB..         MOV     R3,?V0 + 3
   \   00002F   12....       LCALL   ?US_DIV_MOD
   \   000032   EA           MOV     A,R2
    341              *p = c + (( c < 10 ) ? '0' : '7');  // Convert to Ascii
   \   000033   940A         SUBB    A,#0xa
   \   000035   5004         JNC     ??_itoa_1
   \   000037   7830         MOV     R0,#0x30
   \   000039   8002         SJMP    ??_itoa_2
   \                     ??_itoa_1:
   \   00003B   7837         MOV     R0,#0x37
   \                     ??_itoa_2:
   \   00003D   E8           MOV     A,R0
   \   00003E   2A           ADD     A,R2
   \   00003F   8C82         MOV     DPL,R4
   \   000041   8D83         MOV     DPH,R5
   \   000043   F0           MOVX    @DPTR,A
    342              num /= radix;
   \   000044   EE           MOV     A,R6
   \   000045   F8           MOV     R0,A
   \   000046   EF           MOV     A,R7
   \   000047   F9           MOV     R1,A
   \   000048   AA..         MOV     R2,?V0 + 2
   \   00004A   AB..         MOV     R3,?V0 + 3
   \   00004C   12....       LCALL   ?US_DIV_MOD
   \   00004F   88..         MOV     ?V0 + 6,R0
   \   000051   89..         MOV     ?V0 + 7,R1
   \   000053   AE..         MOV     R6,?V0 + 6
   \   000055   AF..         MOV     R7,?V0 + 7
    343              if ( !num )
   \   000057   EE           MOV     A,R6
   \   000058   4F           ORL     A,R7
   \   000059   600D         JZ      ??_itoa_3
    344                break;
    345            }
   \   00005B   05..         INC     ?V0 + 5
   \   00005D   A3           INC     DPTR
   \   00005E   AC82         MOV     R4,DPL
   \   000060   AD83         MOV     R5,DPH
   \   000062   E5..         MOV     A,?V0 + 5
   \   000064   9405         SUBB    A,#0x5
   \   000066   40BF         JC      ??_itoa_0
    346          
    347            for ( c=0 ; c<=i; c++ )
   \                     ??_itoa_3:
   \   000068   7A00         MOV     R2,#0x0
    348              *buf++ = *p--;  // Reverse character order
   \                     ??_itoa_4:
   \   00006A   8C82         MOV     DPL,R4
   \   00006C   8D83         MOV     DPH,R5
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   85..82       MOV     DPL,?V0 + 0
   \   000072   85..83       MOV     DPH,?V0 + 1
   \   000075   F0           MOVX    @DPTR,A
   \   000076   EC           MOV     A,R4
   \   000077   24FF         ADD     A,#-0x1
   \   000079   1C           DEC     R4
   \   00007A   ED           MOV     A,R5
   \   00007B   34FF         ADDC    A,#-0x1
   \   00007D   FD           MOV     R5,A
   \   00007E   A3           INC     DPTR
   \   00007F   8582..       MOV     ?V0 + 0,DPL
   \   000082   8583..       MOV     ?V0 + 1,DPH
   \   000085   0A           INC     R2
   \   000086   E5..         MOV     A,?V0 + 5
   \   000088   C3           CLR     C
   \   000089   9A           SUBB    A,R2
   \   00008A   50DE         JNC     ??_itoa_4
    349          
    350            *buf = '\0';
   \   00008C   E4           CLR     A
   \   00008D   F0           MOVX    @DPTR,A
    351          }
   \   00008E   7405         MOV     A,#0x5
   \   000090   12....       LCALL   ?DEALLOC_XSTACK8
   \   000093   7F08         MOV     R7,#0x8
   \   000095   02....       LJMP    ?BANKED_LEAVE_XDATA
    352          
    353          /*********************************************************************
    354           * @fn        Onboard_rand
    355           *
    356           * @brief    Random number generator
    357           *
    358           * @param   none
    359           *
    360           * @return  uint16 - new random number
    361           *
    362           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    363          uint16 Onboard_rand( void )
   \                     Onboard_rand:
    364          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    365            return ( MAC_RADIO_RANDOM_WORD() );
   \   000004                ; Setup parameters for call to function macMcuRandomWord
   \   000004   12....       LCALL   ??macMcuRandomWord?relay
   \   000007   02....       LJMP    ?Subroutine0 & 0xFFFF
    366          }
    367          
    368          /*********************************************************************
    369           * @fn        Onboard_wait
    370           *
    371           * @brief    Delay wait
    372           *
    373           * @param   uint16 - time to wait
    374           *
    375           * @return  none
    376           *
    377           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    378          void Onboard_wait( uint16 timeout )
   \                     Onboard_wait:
    379          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   EA           MOV     A,R2
   \   000001   4B           ORL     A,R3
   \   000002   600F         JZ      ??Onboard_wait_0
    380            while (timeout--)
    381            {
    382              asm("NOP");
   \                     ??Onboard_wait_1:
   \   000004   00           NOP
    383              asm("NOP");
   \   000005   00           NOP
    384              asm("NOP");
   \   000006   00           NOP
   \   000007   EA           MOV     A,R2
   \   000008   24FF         ADD     A,#-0x1
   \   00000A   1A           DEC     R2
   \   00000B   EB           MOV     A,R3
   \   00000C   34FF         ADDC    A,#-0x1
   \   00000E   FB           MOV     R3,A
   \   00000F   EA           MOV     A,R2
   \   000010   4B           ORL     A,R3
   \   000011   70F1         JNZ     ??Onboard_wait_1
    385            }
    386          }
   \                     ??Onboard_wait_0:
   \   000013   02....       LJMP    ?BRET
    387          
    388          /*********************************************************************
    389           * @fn      Onboard_soft_reset
    390           *
    391           * @brief   Effect a soft reset.
    392           *
    393           * @param   none
    394           *
    395           * @return  none
    396           *
    397           *********************************************************************/

   \                                 In  segment NEAR_CODE, align 1, keep-with-next
    398          __near_func void Onboard_soft_reset( void )
   \                     Onboard_soft_reset:
    399          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    400            HAL_DISABLE_INTERRUPTS();
   \   000000   C2AF         CLR     0xa8.7
    401            // Abort all DMA channels to insure that ongoing operations do not
    402            // interfere with re-configuration.
    403            DMAARM = 0x80 | 0x1F;
   \   000002   75D69F       MOV     0xd6,#-0x61
    404            asm("LJMP 0x0");
   \   000005   020000       LJMP 0x0
    405          }
   \   000008   22           RET
   \   000009                REQUIRE _A_IEN0
   \   000009                REQUIRE DMAARM
    406          
    407          /*********************************************************************
    408           *                    EXTERNAL I/O FUNCTIONS
    409           *
    410           * User defined functions to control external devices. Add your code
    411           * to the following functions to control devices wired to DB outputs.
    412           *
    413           *********************************************************************/
    414          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    415          void BigLight_On( void )
   \                     BigLight_On:
    416          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    417            // Put code here to turn on an external light
    418          }
   \   000000   02....       LJMP    ?BRET
    419          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    420          void BigLight_Off( void )
   \                     BigLight_Off:
    421          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    422            // Put code here to turn off an external light
    423          }
   \   000000   02....       LJMP    ?BRET
    424          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    425          void BuzzerControl( uint8 on )
   \                     BuzzerControl:
    426          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    427            // Put code here to turn a buzzer on/off
    428            (void)on;
    429          }
   \   000000   02....       LJMP    ?BRET
    430          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    431          void Dimmer( uint8 lvl )
   \                     Dimmer:
    432          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    433            // Put code here to control a dimmer
    434            (void)lvl;
    435          }
   \   000000   02....       LJMP    ?BRET
    436          
    437          // No dip switches on this board

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    438          uint8 GetUserDipSw( void )
   \                     GetUserDipSw:
    439          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    440            return 0;
   \   000000   7900         MOV     R1,#0x0
   \   000002   02....       LJMP    ?BRET
    441          }

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for registeredKeysTaskID>`:
   \   000000   FF           DB 255

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??InitBoard?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    InitBoard

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??RegisterForKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    RegisterForKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??OnBoard_SendKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    OnBoard_SendKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??OnBoard_KeyCallback?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    OnBoard_KeyCallback

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??OnBoard_stack_used?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    OnBoard_stack_used

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??_itoa?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    _itoa

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Onboard_rand?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Onboard_rand

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Onboard_wait?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Onboard_wait

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??BigLight_On?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    BigLight_On

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??BigLight_Off?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    BigLight_Off

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??BuzzerControl?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    BuzzerControl

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Dimmer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Dimmer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GetUserDipSw?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GetUserDipSw
    442          
    443          /*********************************************************************
    444          *********************************************************************/

   Maximum stack usage in bytes:

     Function               ISTACK PSTACK XSTACK
     --------               ------ ------ ------
     BigLight_Off               0      0      0
     BigLight_On                0      0      0
     BuzzerControl              0      0      0
     Dimmer                     0      0      0
     GetUserDipSw               0      0      0
     InitBoard                  0      0      9
       -> osal_int_disable      0      0     18
       -> halAssertHandler      0      0     18
       -> HalKeyConfig          0      0     18
     OnBoard_KeyCallback        2      0      0
       -> OnBoard_SendKeys      4      0      0
     OnBoard_SendKeys           1      0     12
       -> osal_msg_allocate     0      0     24
       -> osal_msg_send         0      0     24
     OnBoard_stack_used         2      0      0
     Onboard_rand               2      0      0
       -> macMcuRandomWord      4      0      0
     Onboard_soft_reset         0      0      0
     Onboard_wait               0      0      0
     RegisterForKeys            2      0      0
     _itoa                      1      0     21


   Segment part sizes:

     Function/Label                          Bytes
     --------------                          -----
     SLEEPSTA                                   1
     _A_IEN0                                    1
     DMAARM                                     1
     _lockBits                                 16
     _nvIEEE                                    8
     _reserved                               1932
     aExtendedAddress                           8
     registeredKeysTaskID                       1
     InitBoard                                 54
     RegisterForKeys                           24
     ?Subroutine0                               7
     OnBoard_SendKeys                          72
     OnBoard_KeyCallback                       19
     OnBoard_stack_used                        84
     _itoa                                    152
     Onboard_rand                              10
     Onboard_wait                              22
     Onboard_soft_reset                         9
     BigLight_On                                3
     BigLight_Off                               3
     BuzzerControl                              3
     Dimmer                                     3
     GetUserDipSw                               5
     ?<Initializer for registeredKeysTaskID>    1
     ??InitBoard?relay                          6
     ??RegisterForKeys?relay                    6
     ??OnBoard_SendKeys?relay                   6
     ??OnBoard_KeyCallback?relay                6
     ??OnBoard_stack_used?relay                 6
     ??_itoa?relay                              6
     ??Onboard_rand?relay                       6
     ??Onboard_wait?relay                       6
     ??BigLight_On?relay                        6
     ??BigLight_Off?relay                       6
     ??BuzzerControl?relay                      6
     ??Dimmer?relay                             6
     ??GetUserDipSw?relay                       6

 
   461 bytes in segment BANKED_CODE
    78 bytes in segment BANK_RELAYS
     8 bytes in segment IEEE_ADDRESS_SPACE
    16 bytes in segment LOCK_BITS_ADDRESS_SPACE
     9 bytes in segment NEAR_CODE
 1 932 bytes in segment RESERVED_ADDRESS_SPACE
     3 bytes in segment SFR_AN
     1 byte  in segment XDATA_I
     1 byte  in segment XDATA_ID
     8 bytes in segment XDATA_Z
 
   549 bytes of CODE  memory
     0 bytes of DATA  memory (+ 3 bytes shared)
 1 965 bytes of XDATA memory

Errors: none
Warnings: none
